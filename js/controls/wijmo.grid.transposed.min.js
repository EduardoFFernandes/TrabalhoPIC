/*!
    *
    * Wijmo Library 5.20202.699
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var extendStatics=function(e,n){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};return function(e,n){extendStatics(e,n);function __(){this.constructor=e}e.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();!function(e){!function(n){!function(n){var t=function(n){__extends(TransposedGrid,n);function TransposedGrid(t,o){var r=n.call(this,t,null)||this;r._keyPrefix="item";r._autoGenRows=!0;e.addClass(r.hostElement,"wj-transposed-grid");r.allowSorting=e.grid.AllowSorting.None;r.headersVisibility=e.grid.HeadersVisibility.Row;r._rowInfo=new e.grid.ColumnCollection(r,r.columns.defaultSize);r.initialize(o);r._rowInfo.collectionChanged.addHandler(r._rowInfoChanged,r);r.deferUpdate((function(){var e=r.rowHeaders.columns;if(e.length){e[e.length-1].width=r.columns.defaultSize}}));return r}Object.defineProperty(TransposedGrid.prototype,"autoGenerateRows",{get:function(){return this._autoGenRows},set:function(n){this._autoGenRows=e.asBoolean(n)},enumerable:!0,configurable:!0});TransposedGrid.prototype.refresh=function(e){var t=this._rowInfo;if(t._dirty){t._dirty=!1;this._rowInfoChanged()}else n.prototype.refresh.call(this,e)};Object.defineProperty(TransposedGrid.prototype,"allowAddNew",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0});Object.defineProperty(TransposedGrid.prototype,"allowDelete",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0});TransposedGrid.prototype.onRowEditEnded=function(t){if(null!=this._view){var o=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Change);this._view.collectionChanged.raise(this._view,o)}n.prototype.onRowEditEnded.call(this,t)};TransposedGrid.prototype._getCollectionView=function(t){var o=this,r=null;null!=this._view&&this._view.collectionChanged.removeHandler(this._sourceViewChanged);if(e.isArray(t))t=this._transposeItemsSource(t);else if(t){this._view&&this._view.collectionChanged.removeHandler(this._sourceViewChanged);this._view=e.tryCast(t,"ICollectionView");if(this._view){this._view.collectionChanged.addHandler(this._sourceViewChanged,this);t instanceof e.collections.CollectionView&&(r=t.getError);t=this._transposeItemsSource(this._view.items)}}this.autoGenerateColumns=!0;var i=n.prototype._getCollectionView.call(this,t);r&&i instanceof e.collections.CollectionView&&(this._supportsProxies()?i.getError=function(e,n){var t=e._keys.indexOf(n);return r(e._arr[t],e._bnd.path)}:i.getError=function(e,n){var t=parseInt(n.substr(o._keyPrefix.length));return r(e._arr[t],e._rowInfo.binding)});return i};TransposedGrid.prototype._getColumnTypes=function(n){var t=this;if(this._view){var o=this._view.items;if(e.isArray(o))return o.map((function(n,o){return{binding:t._keyPrefix+o,dataType:e.DataType.Object}}))}return e.getTypes(n)};TransposedGrid.prototype._copy=function(t,o){var r=this;if(/rows|columns/.test(t)){e.assert(e.isArray(o),"Array Expected.");this._rowInfo.deferUpdate((function(){r.autoGenerateRows=!1;r._rowInfo.clear();o.forEach((function(n){var t=new e.grid.Column(n);r._rowInfo.push(t)}))}));return!0}return n.prototype._copy.call(this,t,o)};TransposedGrid.prototype.onLoadedRows=function(t){for(var o=this,r=this.rowHeaders.columns,i=0;i<r.length;i++)r[i].align="left";var s=this.columns;for(i=0;i<s.length;i++){var a=s[i];a.align=null;a.dataType=0}var l=e.grid.FlexGrid._getSerializableProperties(e.grid.Row);this.rows.forEach((function(n){var t=n.dataItem._rowInfo;if(t){for(var i in t)if(l.indexOf(i)>-1&&"showDropDown"!=i){var s=t[i];if(!e.isUndefined(s))try{n[i]=s}catch(e){}}if(r.length){var a=t.header||e.toHeaderCase(t.binding);o.rowHeaders.setCellData(n.index,r.length-1,a)}}}));n.prototype.onLoadedRows.call(this,t)};TransposedGrid.prototype._rowInfoChanged=function(){var n=this;this._toRowInfo&&clearTimeout(this._toRowInfo);this._toRowInfo=setTimeout((function(){var e=n.selection,t=n.itemsSource;n.itemsSource=null;n.itemsSource=t;n.selection=e}),e.Control._REFRESH_INTERVAL)};TransposedGrid.prototype._sourceViewChanged=function(e,n){this.activeEditor||this.invalidate()};TransposedGrid.prototype._transposeItemsSource=function(n){var t=this,o=new e.collections.ObservableArray,r=e.getTypes(n),i=n.map((function(e,n){return t._keyPrefix+n}));(this.autoGenerateRows?this._getRowInfo(n):this._rowInfo).forEach((function(s,a){var l=new e.Binding(s.binding);if(null==s.dataType){var d=l.getValue(n[0]);s.dataType=null!=d?e.getType(d):r[a].dataType}if(t._supportsProxies()){var c=t._createProxy(n,s,i);o.push(c)}else{var u=t._createTransposedObject(n,s,t._keyPrefix);o.push(u)}}));n instanceof e.collections.ObservableArray&&n.collectionChanged.addHandler((function(){var n=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Reset);o.onCollectionChanged(n);t._rowInfoChanged()}));return o};TransposedGrid.prototype._supportsProxies=function(){return null!=window.Proxy};TransposedGrid.prototype._createProxy=function(n,t,o){var r={_arr:n,_rowInfo:t,_bnd:new e.Binding(t.binding),_keys:o};return new Proxy(r,{ownKeys:function(e){return e._keys},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0,writable:!0}},get:function(e,n){var t=e._keys.indexOf(n);return t>-1?e._bnd.getValue(e._arr[t]):e[n]},set:function(n,t,o){var r=n._keys.indexOf(t);if(r>-1){var i=n._arr,s=i[r];n._bnd.setValue(s,o);if(i instanceof e.collections.ObservableArray){var a=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Change,s,r);i.onCollectionChanged(a)}return!0}return!1}})};TransposedGrid.prototype._createTransposedObject=function(n,t,o){for(var r={_arr:n,_rowInfo:t},i=new e.Binding(t.binding),_loop_1=function(t){var s=n[t];Object.defineProperty(r,o+t,{enumerable:!0,get:function(){return i.getValue(s)},set:function(o){i.setValue(s,o);if(n instanceof e.collections.ObservableArray){var r=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Change,s,t);n.onCollectionChanged(r)}return!0}})},s=0;s<n.length;s++)_loop_1(s);return r};TransposedGrid.prototype._getRowInfo=function(n){var t=this,o=[];e.getTypes(n).forEach((function(n){var r=n.binding,i=n.dataType;if(i!=e.DataType.Object&&i!=e.DataType.Array){var s={binding:r,header:e.toHeaderCase(r),dataType:i},a=e.grid.FlexGrid._defTypeWidth[i];if(null!=a){if(e.isString(a)){var l=Math.round(parseFloat(a));a=a.indexOf("*")<0?l:l*t.columns.defaultSize}e.isNumber(a)&&a>0&&(s.width=a)}o.push(s)}}));return o};return TransposedGrid}(e.grid.FlexGrid);n.TransposedGrid=t;var o=function(e){__extends(TransposedGridRow,e);function TransposedGridRow(){return null!==e&&e.apply(this,arguments)||this}return TransposedGridRow}(e.grid.Column);n.TransposedGridRow=o}(n.transposed||(n.transposed={}))}(e.grid||(e.grid={}))}(wijmo||(wijmo={}));!function(e){!function(n){n.transposed||(n.transposed={}),e._registerModule("wijmo.grid.transposed",e.grid.transposed)}(e.grid||(e.grid={}))}(wijmo||(wijmo={}));